tinymce.PluginManager.add('jzk_shortcodes',
function(editor, url) {
	var insertShortcode_spoiler = function() {
		return editor.insertContent('[spoiler]你的内容[/spoiler]');
	};

	var insertShortcode_hide_login = function() {
		return editor.insertContent('[login]你的内容[/login]');
	};

	var insertShortcode_hide_reply = function() {
		return editor.insertContent('[reply]你的内容[/reply]');
	};

	editor.ui.registry.addButton('spoiler', {
		text: '📁',
		tooltip: '折叠内容',
		title: '折叠内容',
		onAction: function() {
			insertShortcode_spoiler();
		}
	});

	editor.ui.registry.addButton('hide_login', {
		text: '🔒',
		tooltip: '登录可见',
		title: '登录可见',
		onAction: function() {
			insertShortcode_hide_login();
		}
	});

	editor.ui.registry.addButton('hide_reply', {
		text: '💬',
		tooltip: '回复可见',
		title: '回复可见',
		onAction: function() {
			insertShortcode_hide_reply();
		}
	});

	return {
		getMetadata: function() {
			return {
				name: '插入短代码',
				url: 'https://www.jizhiku.ml/'
			};
		}
	};
});